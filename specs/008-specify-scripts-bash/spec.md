# Feature Specification: 市場監控頁面交易所快速連結

**Feature Branch**: `008-specify-scripts-bash`
**Created**: 2025-11-06
**Status**: Draft
**Input**: User description: "在市場監控的頁面，不同的交易所及交易對，希望有一個小圖式，點擊後就會開啟新分頁，直接到該交易所及對應的合約交易對頁面"

## User Scenarios & Testing *(mandatory)*

### User Story 1 - 快速訪問交易所合約頁面 (Priority: P1)

交易員在市場監控頁面上查看多個交易所的資金費率和價格時，希望能夠快速跳轉到特定交易所的合約交易頁面，以便進一步查看詳細資訊或執行交易。

**Why this priority**: 這是核心功能，能顯著提升用戶體驗和工作效率。當交易員在市場監控頁面發現感興趣的套利機會時，需要快速訪問交易所進行進一步分析或交易。這個功能可以減少手動搜尋和輸入交易對的時間，提高決策速度。

**Independent Test**: 可以獨立測試：在市場監控頁面上，點擊任意交易所的圖示連結，驗證是否正確開啟新分頁並導航到該交易所對應交易對的合約頁面。測試成功標準是連結正確生成並能在新分頁中開啟正確的交易所頁面。

**Acceptance Scenarios**:

1. **Given** 用戶在市場監控頁面查看 BTC/USDT 的資料，**When** 點擊 Binance 欄位中的交易所圖示，**Then** 在新分頁中開啟 Binance 的 BTC/USDT 永續合約頁面
2. **Given** 用戶在市場監控頁面查看 ETH/USDT 的資料，**When** 點擊 OKX 欄位中的交易所圖示，**Then** 在新分頁中開啟 OKX 的 ETH/USDT 永續合約頁面
3. **Given** 用戶在市場監控頁面查看 SOL/USDT 的資料，**When** 點擊 MEXC 欄位中的交易所圖示，**Then** 在新分頁中開啟 MEXC 的 SOL/USDT 永續合約頁面
4. **Given** 用戶在市場監控頁面查看 BNB/USDT 的資料，**When** 點擊 Gate.io 欄位中的交易所圖示，**Then** 在新分頁中開啟 Gate.io 的 BNB/USDT 永續合約頁面
5. **Given** 用戶點擊交易所圖示後，**When** 新分頁開啟，**Then** 原本的市場監控頁面保持不變，用戶可以繼續查看其他交易對

---

### User Story 2 - 視覺化識別交易所連結 (Priority: P2)

用戶希望能夠清楚識別哪些元素是可點擊的連結，並能快速區分不同交易所的圖示。

**Why this priority**: 良好的視覺設計可以提升用戶體驗，讓用戶更容易理解界面功能。這個優先級較低，因為即使沒有特別的視覺效果，連結功能本身仍然可用。

**Independent Test**: 可以獨立測試：在市場監控頁面上，觀察交易所圖示的視覺呈現，驗證是否有明確的可點擊提示（如 hover 效果、cursor 變化）和清晰的交易所識別。

**Acceptance Scenarios**:

1. **Given** 用戶在市場監控頁面，**When** 滑鼠移到交易所圖示上方，**Then** 顯示視覺回饋（如滑鼠游標變為手指、圖示顏色變化或提示文字）
2. **Given** 用戶查看市場監控頁面，**When** 觀察各交易所欄位，**Then** 每個交易所都有獨特且易於識別的圖示或標誌
3. **Given** 用戶在市場監控頁面，**When** 滑鼠停留在交易所圖示上，**Then** 顯示工具提示（tooltip）說明「點擊前往 [交易所名稱] 查看 [交易對]」

---

### Edge Cases

- **交易對符號格式不同**：不同交易所對交易對的命名可能不同（例如 BTC/USDT vs BTCUSDT vs BTC-USDT），系統需要正確轉換格式以生成正確的連結
- **交易所不支援該交易對**：如果某個交易所不支援特定交易對（資料為空或 N/A），圖示應該顯示為不可點擊或隱藏
- **外部連結無法開啟**：當用戶的瀏覽器阻止彈出視窗時，應顯示友善的提示訊息引導用戶調整設定或提供備用訪問方式
- **行動裝置體驗**：在行動裝置上，圖示應該足夠大以方便觸控操作，並且開啟連結的行為應符合行動裝置的使用習慣
- **連結生成錯誤**：如果因為資料問題導致無法生成正確的連結，應該隱藏圖示或顯示為不可點擊狀態，避免導航到錯誤的頁面

## Requirements *(mandatory)*

### Functional Requirements

- **FR-001**: 系統必須在市場監控頁面的每個交易所欄位中顯示可點擊的圖示或連結元素
- **FR-002**: 當用戶點擊交易所圖示時，系統必須在新瀏覽器分頁中開啟對應交易所的永續合約交易對頁面
- **FR-003**: 系統必須支援所有四個交易所（Binance、OKX、MEXC、Gate.io）的連結生成
- **FR-004**: 系統必須根據當前行的交易對（symbol）動態生成正確的交易所 URL
- **FR-005**: 系統必須正確處理不同交易所的 URL 格式差異，確保連結指向正確的永續合約頁面
- **FR-006**: 當交易所不支援特定交易對時（資料為空或不可用），系統必須隱藏或禁用該交易所的圖示連結
- **FR-007**: 圖示必須提供視覺回饋（hover 效果），讓用戶清楚知道這是可點擊的元素
- **FR-008**: 系統必須在圖示上提供工具提示（tooltip），顯示「點擊前往 [交易所名稱] 查看 [交易對]」的說明文字
- **FR-009**: 連結必須使用 `target="_blank"` 屬性在新分頁開啟，並且使用 `rel="noopener noreferrer"` 確保安全性
- **FR-010**: 系統必須正確轉換交易對符號格式以匹配各交易所的 URL 格式要求

### Key Entities

- **交易所連結 (Exchange Link)**: 包含交易所名稱、交易對符號、完整 URL、是否可用狀態
- **交易所 URL 映射 (Exchange URL Mapping)**: 定義每個交易所的基礎 URL 模板和交易對符號格式轉換規則

## Success Criteria *(mandatory)*

### Measurable Outcomes

- **SC-001**: 用戶可以在 1 秒內點擊圖示並開啟正確的交易所頁面
- **SC-002**: 對於每個支援的交易對，四個交易所的連結準確率達到 100%（連結指向正確的交易對頁面）
- **SC-003**: 95% 的用戶能夠在首次使用時，無需額外說明就能理解圖示的功能並成功使用
- **SC-004**: 在行動裝置上，圖示的點擊成功率達到 95% 以上（不會因為太小而難以點擊）
- **SC-005**: 當用戶點擊不可用的交易對時，系統能夠正確處理（不產生錯誤或導航到錯誤頁面）

## Dependencies & Assumptions *(mandatory if applicable)*

### Dependencies

- 市場監控頁面已實作並顯示多個交易所的資金費率和價格資料
- 前端框架支援在新分頁開啟連結的功能
- 已知各交易所的永續合約頁面 URL 結構

### Assumptions

- 各交易所的永續合約頁面 URL 格式相對穩定，不會頻繁變動
- 用戶的瀏覽器允許開啟新分頁（未完全阻止彈出視窗）
- 市場監控頁面中顯示的交易對符號格式支援兩種形式：
  - 帶斜線格式：`BTC/USDT`、`ETH/USDT`（標準格式）
  - 無斜線格式：`BTCUSDT`、`ETHUSDT`（資料庫儲存格式）
  - URL Builder 會自動識別並正確轉換這兩種格式
- 交易所圖示或標誌已準備好（或使用文字連結作為替代方案）
- 連結開啟後的頁面載入速度由交易所控制，不在本功能範圍內

## Out of Scope *(mandatory)*

- 在應用內嵌入交易所的交易介面（iframe 或 webview）
- 自動登入用戶在交易所的帳號
- 追蹤或記錄用戶點擊連結的行為統計
- 提供交易所頁面的預覽或摘要資訊
- 支援現貨交易或其他非永續合約的交易對連結
- 自動檢測和更新交易所 URL 格式變化
