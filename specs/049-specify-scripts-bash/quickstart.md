# å¿«é€Ÿå…¥é–€ï¼šäº¤æ˜“æ“ä½œé©—è­‰è…³æœ¬

**Feature**: 049-trading-validation-script | **Date**: 2025-12-29

---

## å‰ç½®æ¢ä»¶

1. **Web æœå‹™é‹è¡Œä¸­**ï¼šç¢ºä¿ `pnpm dev` å·²å•Ÿå‹•ï¼ˆé è¨­ http://localhost:3000ï¼‰
2. **æœ‰æ•ˆçš„ API Key**ï¼šåœ¨ç³»çµ±ä¸­è¨­å®šç›®æ¨™äº¤æ˜“æ‰€çš„ API Key
3. **æ¸¬è©¦è³‡é‡‘**ï¼šå¸³æˆ¶æœ‰è¶³å¤ é¤˜é¡åŸ·è¡Œå°é¡æ¸¬è©¦ï¼ˆå»ºè­° 10-20 USDTï¼‰
4. **äº¤æ˜“æ‰€è¨­å®š**ï¼šç¢ºä¿äº¤æ˜“æ‰€å·²é–‹å•Ÿ Hedge Modeï¼ˆé›™å‘æŒå€‰æ¨¡å¼ï¼‰

---

## å¿«é€Ÿé–‹å§‹

### 1. è‡ªå‹•æ¸¬è©¦æ¨¡å¼ï¼ˆå®Œæ•´æµç¨‹ï¼‰

åŸ·è¡Œé–‹å€‰â†’åœæåœåˆ©â†’å¹³å€‰çš„å®Œæ•´é©—è­‰æµç¨‹ï¼š

```bash
# Gate.io é©—è­‰
pnpm tsx src/scripts/trading-validation/validate-trading.ts run \
  --exchange gateio \
  --symbol BTCUSDT \
  --quantity 10 \
  --leverage 1 \
  --stop-loss 5 \
  --take-profit 5 \
  --user-id <your-user-id>

# Binance é©—è­‰
pnpm tsx src/scripts/trading-validation/validate-trading.ts run \
  --exchange binance \
  --symbol BTCUSDT \
  --quantity 10 \
  --leverage 1 \
  --stop-loss 5 \
  --take-profit 5 \
  --user-id <your-user-id>
```

### 2. æŸ¥è©¢é©—è­‰æ¨¡å¼ï¼ˆé©—è­‰ç¾æœ‰æŒå€‰ï¼‰

é©—è­‰å·²é€é Web ç•Œé¢å»ºç«‹çš„æŒå€‰ï¼š

```bash
pnpm tsx src/scripts/trading-validation/validate-trading.ts verify \
  --position-id <position-id>
```

### 3. JSON è¼¸å‡º

é©åˆè‡ªå‹•åŒ–è™•ç†æˆ–å„²å­˜å ±å‘Šï¼š

```bash
pnpm tsx src/scripts/trading-validation/validate-trading.ts run \
  --exchange gateio \
  --symbol BTCUSDT \
  --quantity 10 \
  --json > validation-report.json
```

---

## åƒæ•¸èªªæ˜

### `run` æ¨¡å¼åƒæ•¸

| åƒæ•¸ | å¿…å¡« | èªªæ˜ | ç¯„ä¾‹ |
|------|------|------|------|
| `--exchange` | âœ… | äº¤æ˜“æ‰€ | `binance`, `okx`, `gateio`, `bingx` |
| `--symbol` | âœ… | äº¤æ˜“å° | `BTCUSDT`, `ETHUSDT` |
| `--quantity` | âœ… | é–‹å€‰é‡‘é¡ (USDT) | `10`, `20` |
| `--leverage` | âŒ | æ§“æ¡¿å€æ•¸ï¼ˆé è¨­ 1ï¼‰ | `1`, `5`, `10` |
| `--stop-loss` | âŒ | åœæç™¾åˆ†æ¯” | `5` (5%) |
| `--take-profit` | âŒ | åœåˆ©ç™¾åˆ†æ¯” | `5` (5%) |
| `--user-id` | âœ… | ç³»çµ±ç”¨æˆ¶ ID | `clxxx...` |
| `--json` | âŒ | è¼¸å‡º JSON æ ¼å¼ | - |

### `verify` æ¨¡å¼åƒæ•¸

| åƒæ•¸ | å¿…å¡« | èªªæ˜ | ç¯„ä¾‹ |
|------|------|------|------|
| `--position-id` | âœ… | æŒå€‰ ID | `clxxx...` |
| `--json` | âŒ | è¼¸å‡º JSON æ ¼å¼ | - |

---

## é©—è­‰é …ç›®èªªæ˜

| # | é …ç›® | èªªæ˜ |
|---|------|------|
| 1 | äº¤æ˜“å°æ ¼å¼æ­£ç¢º | ç¢ºèª symbol è½‰æ›ç‚ºæ­£ç¢ºçš„ CCXT æ ¼å¼ |
| 2 | é–‹å€‰æ•¸é‡æ­£ç¢º | æ¯”å°é æœŸæ•¸é‡èˆ‡å¯¦éš›æŒå€‰æ•¸é‡ |
| 3 | contractSize è½‰æ›æ­£ç¢º | é©—è­‰åˆç´„å¼µæ•¸èˆ‡å¹£æœ¬ä½æ•¸é‡è½‰æ› |
| 4 | åœæå–®å·²å»ºç«‹ | ç¢ºèªåœææ¢ä»¶å–®å­˜åœ¨ |
| 5 | åœæåƒ¹æ ¼æ­£ç¢º | æ¯”å°åœæè§¸ç™¼åƒ¹æ ¼ |
| 6 | åœææ•¸é‡æ­£ç¢º | æ¯”å°åœæè¨‚å–®æ•¸é‡ |
| 7 | åœåˆ©å–®å·²å»ºç«‹ | ç¢ºèªåœåˆ©æ¢ä»¶å–®å­˜åœ¨ |
| 8 | åœåˆ©åƒ¹æ ¼æ­£ç¢º | æ¯”å°åœåˆ©è§¸ç™¼åƒ¹æ ¼ |
| 9 | åœåˆ©æ•¸é‡æ­£ç¢º | æ¯”å°åœåˆ©è¨‚å–®æ•¸é‡ |
| 10 | å¹³å€‰åŸ·è¡ŒæˆåŠŸ | ç¢ºèªæŒå€‰å·²é—œé–‰ |
| 11 | å¹³å€‰æ•¸é‡æ­£ç¢º | æ¯”å°å¹³å€‰æˆäº¤æ•¸é‡ |

---

## å¸¸è¦‹å•é¡Œ

### Q: å¦‚ä½•å–å¾— user-idï¼Ÿ

```bash
# å¾è³‡æ–™åº«æŸ¥è©¢
pnpm tsx -e "
  const { PrismaClient } = require('@prisma/client');
  const prisma = new PrismaClient();
  prisma.user.findMany({ select: { id: true, email: true } })
    .then(users => console.log(users))
    .finally(() => prisma.\$disconnect());
"
```

### Q: é©—è­‰å¤±æ•—å¦‚ä½•è™•ç†ï¼Ÿ

1. æŸ¥çœ‹å¤±æ•—é …ç›®çš„ã€Œé æœŸã€èˆ‡ã€Œå¯¦éš›ã€å€¼å·®ç•°
2. æª¢æŸ¥å°æ‡‰çš„æ¢ä»¶å–®é©é…å™¨ç¨‹å¼ç¢¼
3. ç¢ºèª contractSize è¨ˆç®—é‚è¼¯æ­£ç¢º

### Q: å¦‚ä½•é©—è­‰ç‰¹å®šäº¤æ˜“æ‰€ï¼Ÿ

ç›´æ¥æŒ‡å®š `--exchange` åƒæ•¸å³å¯é‡å°å–®ä¸€äº¤æ˜“æ‰€åŸ·è¡Œé©—è­‰ã€‚

---

## ç¯„ä¾‹è¼¸å‡º

```
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
äº¤æ˜“é©—è­‰å ±å‘Š - Gate.io BTCUSDT
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“ é©—è­‰æ™‚é–“: 2025-12-29 10:30:45
ğŸ“Š é©—è­‰æ¨¡å¼: è‡ªå‹•æ¸¬è©¦ (run)

ğŸ“ˆ é–‹å€‰é©—è­‰
âœ… [1] äº¤æ˜“å°æ ¼å¼æ­£ç¢º
âœ… [2] é–‹å€‰æ•¸é‡æ­£ç¢º
âœ… [3] contractSize è½‰æ›æ­£ç¢º

ğŸ›¡ï¸ æ¢ä»¶å–®é©—è­‰
âœ… [4] åœæå–®å·²å»ºç«‹
âœ… [5] åœæåƒ¹æ ¼æ­£ç¢º
âœ… [6] åœææ•¸é‡æ­£ç¢º
âœ… [7] åœåˆ©å–®å·²å»ºç«‹
âœ… [8] åœåˆ©åƒ¹æ ¼æ­£ç¢º
âœ… [9] åœåˆ©æ•¸é‡æ­£ç¢º

ğŸ“‰ å¹³å€‰é©—è­‰
âœ… [10] å¹³å€‰åŸ·è¡ŒæˆåŠŸ
âœ… [11] å¹³å€‰æ•¸é‡æ­£ç¢º

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
çµæœ: 11/11 é€šé âœ…
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```
